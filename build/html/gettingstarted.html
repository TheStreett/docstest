

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AI Model Share Tutorial &mdash; AIModelShare 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example Notebooks" href="example_notebooks.html" />
    <link rel="prev" title="Welcome to AIModelShare’s documentation!" href="index.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="index.html">
                AIModelShare
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
      <li>AI Model Share Tutorial</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="_sources/gettingstarted.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">AI Model Share Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-one-deploy-a-model-playground">Part One: Deploy a Model Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-two-create-a-competition">Part Two: Create a Competition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#part-three-maintaining-your-model-playground">Part Three: Maintaining your Model Playground</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks.html">Example Notebooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#tabular-classification">Tabular Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#tabular-regression">Tabular Regression:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#text-classification">Text Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#image-classification">Image Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#video-classification">Video Classification:</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modelplayground.html">Model Playground Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#activate">activate</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#deploy">deploy</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#create-competition">create_competition</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#create-experiment">create_experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#quick-submit">quick_submit</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#update-runtime-model">update_runtime_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#update-example-data">update_example_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#delete-deployment">delete_deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="competition.html">Competition Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="competition.html#submit-model">submit_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#instantiate-model">instantiate_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#inspect-model">inspect_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#compare-models">compare_models</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#stylize-compare">stylize_compare</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#inspect-y-test">inspect_y_test</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#get-leaderboard">get_leaderboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#stylize-leaderboard">stylize_leaderboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#update-access-list">update_access_list</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Supporting Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="functions.html#configure-credentials">configure_credentials()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#set-credentials">set_credentials()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#download-data">download_data()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#export-eval-metric">export_eval_metric()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#export-reproducibility-env">export_reproducibility_env()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#share-dataset">share_dataset()</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#custom-deployments">Custom Deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#using-pyspark">Using PySpark</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#connecting-custom-web-apps">Connecting Custom Web Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_features.html#model-reproducibility">Model Reproducibility</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">The AI Model Share Initiative</a></li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <section id="ai-model-share-tutorial">
<span id="aimodelshare-tutorial"></span><h1>AI Model Share Tutorial<a class="headerlink" href="#ai-model-share-tutorial" title="Permalink to this heading">¶</a></h1>
<p>This tutorial will take you through the core functionality of the AI Model Share library, with the Titanic passenger data set. You will import the Titanic data set, build a machine learning model for tabular classification, deploy an interactive web dashboard (ModelPlayground) powered by a REST API, create a competition, and explore how to learn from the model collaboration process.</p>
<p>This tutorial is applicable for all new users, especially those that are interested in publishing their machine learning models on a live webpage to generate predictions, improving on existing models through the model collaboration process, and/or hosting a competition for other users.</p>
<p>If you have been invited to participate in an existing competition (or would like to submit a model to any of our ongoing public competitions), you may wish to skip to one of the Model Submission Guides included in the <a class="reference internal" href="example_notebooks.html#example-notebooks"><span class="std std-ref">Example Notebooks</span></a>.</p>
<p>The only thing to need to complete the tutorial is a computer with an internet connection.</p>
<section id="getting-started">
<span id="id1"></span><h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<section id="credential-configuration">
<span id="cred-configure"></span><h3>Credential Configuration<a class="headerlink" href="#credential-configuration" title="Permalink to this heading">¶</a></h3>
<p>To complete this tutorial, you will need to have a pre-formatted credentials file. Follow the directions <a class="reference internal" href="create_credentials.html#create-credentials"><span class="std std-ref">HERE</span></a> to create one.</p>
</section>
<section id="set-up-environment">
<span id="set-environment"></span><h3>Set Up Environment<a class="headerlink" href="#set-up-environment" title="Permalink to this heading">¶</a></h3>
<p>Use your credentials file to set your credentials for all aimodelshare functions. This will give you access to your AI Model Share account and your AWS resources in order to deploy a Model Playground.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set credentials</span>
<span class="kn">from</span> <span class="nn">aimodelshare.aws</span> <span class="kn">import</span> <span class="n">set_credentials</span>
<span class="n">set_credentials</span><span class="p">(</span><span class="n">credential_file</span><span class="o">=</span><span class="s2">&quot;credentials.txt&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;deploy_model&quot;</span><span class="p">)</span>

<span class="c1"># Get materials for tutorial</span>
<span class="kn">import</span> <span class="nn">aimodelshare</span> <span class="k">as</span> <span class="nn">ai</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train_labels</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">example_data</span><span class="p">,</span> <span class="n">y_test_labels</span> <span class="o">=</span> <span class="n">ai</span><span class="o">.</span><span class="n">import_quickstart_data</span><span class="p">(</span><span class="s2">&quot;titanic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="part-one-deploy-a-model-playground">
<span id="part-one"></span><h2>Part One: Deploy a Model Playground<a class="headerlink" href="#part-one-deploy-a-model-playground" title="Permalink to this heading">¶</a></h2>
<p>This tutorial will use data from the Titanic passenger data set. We will use attributes of the passengers on board to determine whether they survived or died in the 1912 Shipwreck.</p>
<blockquote>
<div><p>At the end of part one, you will have built a model for tabular classification which will take passenger characteristics and predict if they survived or died in the Titanic shipwreck. You will have deployed that model into a “Model Playground”, which is an interactive web application that will use your model to generate predictions in a user-friendly dashboard. Additionally, users will have access to customized code to use the background REST API to generate predictions programatically.</p>
</div></blockquote>
<section id="step-1-preprocessor-function-setup">
<span id="step-one"></span><h3>Step 1: Preprocessor Function &amp; Setup<a class="headerlink" href="#step-1-preprocessor-function-setup" title="Permalink to this heading">¶</a></h3>
<p>Preprocessor functions are used to preprocess data into the precise format your model requires to generate predictions. An example preprocessor using sklearn’s Column Transformer is included below, but you can customize your preprocessor however you see fit.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Preprocessor functions should always be named “preprocessor”.</p>
<p>You can use any Python library in a preprocessor function, but all libraries should be imported inside your preprocessor function.</p>
<p>For tabular prediction, models users should minimally include function inputs for an unpreprocessed pandas dataframe. Any categorical features should be preprocessed to one hot encoded numeric values.</p>
</div>
<p>Set Up Preprocessor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># In this case we use Sklearn&#39;s Column transformer in our preprocessor function</span>
<span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span> <span class="n">OneHotEncoder</span>

<span class="c1">#Preprocess data using sklearn&#39;s Column Transformer approach</span>

<span class="c1"># We create the preprocessing pipelines for both numeric and categorical data.</span>
<span class="n">numeric_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;fare&#39;</span><span class="p">]</span>
<span class="n">numeric_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)),</span> <span class="c1">#&#39;imputer&#39; names the step</span>
        <span class="p">(</span><span class="s1">&#39;scaler&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())])</span>

<span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;embarked&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;pclass&#39;</span><span class="p">]</span>

<span class="c1"># Replacing missing values with Modal value and then one-hot encoding.</span>
<span class="n">categorical_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;most_frequent&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s1">&#39;onehot&#39;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">))])</span>

<span class="c1"># Final preprocessor object set up with ColumnTransformer...</span>
<span class="n">preprocess</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">(</span>
        <span class="n">transformers</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="n">numeric_transformer</span><span class="p">,</span> <span class="n">numeric_features</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical_features</span><span class="p">)])</span>

<span class="c1"># fit preprocessor to your data</span>
<span class="n">preprocess</span> <span class="o">=</span> <span class="n">preprocess</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
</pre></div>
</div>
<p>Preprocessor Function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here is where we actually write the preprocessor function:</span>

<span class="c1"># Write function to transform data with preprocessor</span>
<span class="c1"># In this case we use sklearn&#39;s Column transformer in our preprocessor function</span>

<span class="k">def</span> <span class="nf">preprocessor</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">preprocessed_data</span><span class="o">=</span><span class="n">preprocess</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">preprocessed_data</span>
</pre></div>
</div>
<p>Check X Data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># check shape of X data after preprocessing it using our new function</span>
<span class="n">preprocessor</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<p>One Hot Encode y_data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create one hot encoded data from list of y_train category labels</span>
<span class="c1">#...to allow `ModelPlayground.deploy()` to extract correct labels for predictions in your deployed API</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">y_train_labels</span><span class="p">)</span>

<span class="c1">#ensure column names are correct in one hot encoded target for correct label extraction</span>
<span class="nb">list</span><span class="p">(</span><span class="n">y_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="step-2-build-model">
<span id="step-two"></span><h3>Step 2 - Build Model<a class="headerlink" href="#step-2-build-model" title="Permalink to this heading">¶</a></h3>
<p>Build Model Using sklearn (or your preferred Machine Learning Library). This is the model that will ultimately power your REST API and Model Playground. The model and preprocessor can be updated at any time by the Model Playground owner.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">penalty</span><span class="o">=</span><span class="s1">&#39;l1&#39;</span><span class="p">,</span> <span class="n">solver</span> <span class="o">=</span> <span class="s1">&#39;liblinear&#39;</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="n">y_train_labels</span><span class="p">)</span> <span class="c1"># Fitting to the training set.</span>
<span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="n">y_train_labels</span><span class="p">)</span> <span class="c1"># Fit score, 0-1 scale.</span>
</pre></div>
</div>
</section>
<section id="step-3-save-preprocessor">
<span id="step-three"></span><h3>Step 3 - Save Preprocessor<a class="headerlink" href="#step-3-save-preprocessor" title="Permalink to this heading">¶</a></h3>
<p>Save preprocessor function to “preprocessor.zip” file. The preprocessor code will be included in the Model Playground and executed to preprocess data submitted for predictions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">aimodelshare</span> <span class="k">as</span> <span class="nn">ai</span>
<span class="n">ai</span><span class="o">.</span><span class="n">export_preprocessor</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Now let&#39;s import and test the preprocessor function to see if it is working...</span>

<span class="kn">import</span> <span class="nn">aimodelshare</span> <span class="k">as</span> <span class="nn">ai</span>
<span class="n">prep</span><span class="o">=</span><span class="n">ai</span><span class="o">.</span><span class="n">import_preprocessor</span><span class="p">(</span><span class="s2">&quot;preprocessor.zip&quot;</span><span class="p">)</span>
<span class="n">prep</span><span class="p">(</span><span class="n">example_data</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</section>
<section id="step-4-save-sklearn-model-to-onnx-file-format">
<span id="step-four"></span><h3>Step 4 - Save sklearn Model to Onnx File Format<a class="headerlink" href="#step-4-save-sklearn-model-to-onnx-file-format" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save sklearn model to local ONNX file</span>
<span class="kn">from</span> <span class="nn">aimodelshare.aimsonnx</span> <span class="kn">import</span> <span class="n">model_to_onnx</span>

<span class="c1"># Check how many preprocessed input features there are</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">FloatTensorType</span>
<span class="n">initial_type</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;float_input&#39;</span><span class="p">,</span> <span class="n">FloatTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">10</span><span class="p">]))]</span>  <span class="c1"># Insert correct number of features in preprocessed data</span>

<span class="n">onnx_model</span> <span class="o">=</span> <span class="n">model_to_onnx</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">framework</span><span class="o">=</span><span class="s1">&#39;sklearn&#39;</span><span class="p">,</span>
                <span class="n">initial_types</span><span class="o">=</span><span class="n">initial_type</span><span class="p">,</span>
                <span class="n">transfer_learning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">deep_learning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;model.onnx&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">onnx_model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="step-5-create-your-model-playground-and-deploy-rest-api-live-web-application">
<span id="step-five"></span><h3>Step 5 - Create your Model Playground and Deploy REST API/Live Web-Application<a class="headerlink" href="#step-5-create-your-model-playground-and-deploy-rest-api-live-web-application" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Set up arguments for Model Playground deployment</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">model_filepath</span><span class="o">=</span><span class="s2">&quot;model.onnx&quot;</span>
<span class="n">preprocessor_filepath</span><span class="o">=</span><span class="s2">&quot;preprocessor.zip&quot;</span>
<span class="n">exampledata</span> <span class="o">=</span> <span class="n">example_data</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aimodelshare</span> <span class="kn">import</span> <span class="n">ModelPlayground</span>

<span class="c1">#Instantiate ModelPlayground() Class</span>

<span class="n">myplayground</span><span class="o">=</span><span class="n">ModelPlayground</span><span class="p">(</span><span class="n">model_type</span><span class="o">=</span><span class="s2">&quot;tabular&quot;</span><span class="p">,</span> <span class="n">classification</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Create Model Playground (generates live rest api and web-app for your model/preprocessor)</span>

<span class="n">myplayground</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">model_filepath</span><span class="p">,</span> <span class="n">preprocessor_filepath</span><span class="p">,</span> <span class="n">y_train_labels</span><span class="p">,</span> <span class="n">exampledata</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="use-your-new-model-playground">
<h3>Use your new Model Playground!<a class="headerlink" href="#use-your-new-model-playground" title="Permalink to this heading">¶</a></h3>
<p>Follow the link in the output above to:</p>
<ul class="simple">
<li><p>Generate predictions with your interactive web dashboard.</p></li>
<li><p>Access example code in Python, R, and Curl.</p></li>
</ul>
<p>Or, follow the rest of the tutorial to create a competition for your Model Playground and:</p>
<ul class="simple">
<li><p>Access verified model performance metrics.</p></li>
<li><p>Upload multiple models to a leaderboard.</p></li>
<li><p>Easily compare model performance &amp; structure.</p></li>
</ul>
</section>
</section>
<section id="part-two-create-a-competition">
<span id="part-two"></span><h2>Part Two: Create a Competition<a class="headerlink" href="#part-two-create-a-competition" title="Permalink to this heading">¶</a></h2>
<p>After deploying your Model Playground, you can now create a competition. Creating a competition allows you to:</p>
<ul class="simple">
<li><p>Verify the model performance metrics on aimodelshare.org.</p></li>
<li><p>Submit models to a leaderboard.</p></li>
<li><p>Grant access to other users to submit models to the leaderboard.</p></li>
<li><p>Easily compare model performance and structure.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create list of authorized participants for competition</span>
<span class="c1"># Note that participants should use the same email address when creating modelshare.org account</span>

<span class="n">emaillist</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;emailaddress1@email.com&quot;</span><span class="p">,</span> <span class="s2">&quot;emailaddress2@email.com&quot;</span><span class="p">,</span> <span class="s2">&quot;emailaddress3@email.com&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create Competition</span>
<span class="c1"># Note -- Make competition public (allow any AI Model Share user to submit models)</span>
<span class="c1"># .... by excluding the email_list argument and including the &#39;public=True&#39; argument</span>

<span class="n">myplayground</span><span class="o">.</span><span class="n">create_competition</span><span class="p">(</span><span class="n">data_directory</span><span class="o">=</span><span class="s1">&#39;titanic_competition_data&#39;</span><span class="p">,</span>
                                 <span class="n">y_test</span> <span class="o">=</span> <span class="n">y_test_labels</span><span class="p">,</span>
                             <span class="c1">#   email_list=emaillist)</span>
                                 <span class="n">public</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Instantiate Competition</span>
<span class="c1">#--Note: If you start a new session, the first argument should be the Model Playground url in quotes.</span>
<span class="c1">#--e.g.- mycompetition= ai.Competition(&quot;https://2121212.execute-api.us-east-1.amazonaws.com/prod/m)</span>
<span class="c1">#See Model Playground &quot;Compete&quot; tab for example model submission code.</span>

<span class="n">mycompetition</span><span class="o">=</span> <span class="n">ai</span><span class="o">.</span><span class="n">Competition</span><span class="p">(</span><span class="n">myplayground</span><span class="o">.</span><span class="n">playground_url</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add, remove, or completely update authorized participants for competition later</span>
<span class="n">emaillist</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;emailaddress4@email.com&quot;</span><span class="p">]</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">update_access_list</span><span class="p">(</span><span class="n">email_list</span><span class="o">=</span><span class="n">emaillist</span><span class="p">,</span><span class="n">update_type</span><span class="o">=</span><span class="s2">&quot;Add&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="submit-models">
<span id="submit-models-to-comp"></span><h3>Submit Models<a class="headerlink" href="#submit-models" title="Permalink to this heading">¶</a></h3>
<p>After a competition is created, users can submit models to be tracked in the competition leaderboard. When models are submitted, model metadata is extracted and model performance metrics are generated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There may be two leaderboards associated with every competition: a “public” leaderboard, visible to everyone with access to the competition, and a “private” leaderboard, visible to only the competition owner. Competition owners may choose to create the private leaderboard for the purpose of evaluating models with a special subset of held out y-test data. This encourages the development of models that are generalizable to additional real-world data, and not overfit to a specific split of data.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Authorized users can submit new models after setting credentials using modelshare.org username/password</span>
<span class="kn">from</span> <span class="nn">aimodelshare.aws</span> <span class="kn">import</span> <span class="n">set_credentials</span>

<span class="n">apiurl</span><span class="o">=</span><span class="n">myplayground</span><span class="o">.</span><span class="n">playground_url</span> <span class="c1"># example url from deployed playground: apiurl= &quot;https://123456.execute-api.us-east-1.amazonaws.com/prod/m</span>

<span class="n">set_credentials</span><span class="p">(</span><span class="n">apiurl</span><span class="o">=</span><span class="n">apiurl</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Submit Model 1:</span>

<span class="c1">#-- Generate predicted values (a list of predicted labels &quot;survived&quot; or &quot;died&quot;) (Model 1)</span>
<span class="n">prediction_labels</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>

<span class="c1"># Submit Model 1 to Competition Leaderboard</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">submit_model</span><span class="p">(</span><span class="n">model_filepath</span> <span class="o">=</span> <span class="s2">&quot;model.onnx&quot;</span><span class="p">,</span>
                         <span class="n">preprocessor_filepath</span><span class="o">=</span><span class="s2">&quot;preprocessor.zip&quot;</span><span class="p">,</span>
                         <span class="n">prediction_submission</span><span class="o">=</span><span class="n">prediction_labels</span><span class="p">)</span>
</pre></div>
</div>
<p>Create, save, and submit a second model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create model 2 (L2 Regularization - Ridge)</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>

<span class="n">model_2</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mf">.01</span><span class="p">,</span> <span class="n">penalty</span><span class="o">=</span><span class="s1">&#39;l2&#39;</span><span class="p">)</span>
<span class="n">model_2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="n">y_train_labels</span><span class="p">)</span> <span class="c1"># Fitting to the training set.</span>
<span class="n">model_2</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="n">y_train_labels</span><span class="p">)</span> <span class="c1"># Fit score, 0-1 scale.</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save Model 2 to .onnx file</span>

<span class="c1"># How many preprocessed input features there are</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">FloatTensorType</span>
<span class="n">initial_type</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;float_input&#39;</span><span class="p">,</span> <span class="n">FloatTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">10</span><span class="p">]))]</span>

<span class="n">onnx_model</span> <span class="o">=</span> <span class="n">model_to_onnx</span><span class="p">(</span><span class="n">model_2</span><span class="p">,</span> <span class="n">framework</span><span class="o">=</span><span class="s1">&#39;sklearn&#39;</span><span class="p">,</span>
                  <span class="n">initial_types</span><span class="o">=</span><span class="n">initial_type</span><span class="p">,</span>
                  <span class="n">transfer_learning</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">deep_learning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Save model to local .onnx file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;model_2.onnx&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">onnx_model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Submit Model 2</span>

<span class="c1">#-- Generate predicted y values (Model 2)</span>
<span class="n">prediction_labels</span> <span class="o">=</span> <span class="n">model_2</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>

<span class="c1"># Submit Model 2 to Competition Leaderboard</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">submit_model</span><span class="p">(</span><span class="n">model_filepath</span> <span class="o">=</span> <span class="s2">&quot;model_2.onnx&quot;</span><span class="p">,</span>
                         <span class="n">prediction_submission</span><span class="o">=</span><span class="n">prediction_labels</span><span class="p">,</span>
                         <span class="n">preprocessor_filepath</span><span class="o">=</span><span class="s2">&quot;preprocessor.zip&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="learn-from-submitted-models">
<span id="learn"></span><h3>Learn From Submitted Models<a class="headerlink" href="#learn-from-submitted-models" title="Permalink to this heading">¶</a></h3>
<p>The leaderboard is a helpful tool for not only examining your model’s current standing in an active competition, but also for learning about which model structures most and least effective for a particular data set. Authorized competition users can download the current leaderboard for an overall understanding of model metadata and ranking, and then compare certain models to examine their metadata more closely.</p>
<p>Get Leaderboard:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">mycompetition</span><span class="o">.</span><span class="n">get_leaderboard</span><span class="p">()</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">stylize_leaderboard</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Compare Models:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compare two or more models</span>
<span class="n">data</span><span class="o">=</span><span class="n">mycompetition</span><span class="o">.</span><span class="n">compare_models</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">stylize_compare</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Competition.compare_models()</span></code> is maximally useful for comparing models with the same basic structure.</p>
</div>
<p>Users can also check the structure of the y test data. This helps users understand how to submit predicted values to leaderboard.</p>
<p>Check Structure of y-test data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mycompetition</span><span class="o">.</span><span class="n">inspect_y_test</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="part-three-maintaining-your-model-playground">
<span id="part-three"></span><h2>Part Three: Maintaining your Model Playground<a class="headerlink" href="#part-three-maintaining-your-model-playground" title="Permalink to this heading">¶</a></h2>
<p>Update Runtime model</p>
<p>Use this function to:</p>
<ol class="arabic simple">
<li><p>Update the prediction API behind your Model Playground with a new model, chosen from the leaderboard, and.</p></li>
<li><p>Verify the model performance metrics in your Model Playground.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myplayground</span><span class="o">.</span><span class="n">update_runtime_model</span><span class="p">(</span><span class="n">model_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Delete Deployment</p>
<p>Use this function to delete the entire Model Playground, including the REST API, web dashboard, competition, and all submitted models</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myplayground</span><span class="o">.</span><span class="n">delete_deployment</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sphinx_highlight.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright 2022, AIModelShare.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.
        </div>
    </div>  

</body>
</html>