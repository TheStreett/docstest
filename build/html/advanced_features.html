

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced Features &mdash; AIModelShare 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The AI Model Share Initiative" href="about.html" />
    <link rel="prev" title="Supporting Functions" href="functions.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="index.html">
                AIModelShare
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="index.html">Docs</a></li>
        
      <li>Advanced Features</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="_sources/advanced_features.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">AI Model Share Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html#part-one-deploy-a-model-playground">Part One: Deploy a Model Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html#part-two-create-a-competition">Part Two: Create a Competition</a></li>
<li class="toctree-l2"><a class="reference internal" href="gettingstarted.html#part-three-maintaining-your-model-playground">Part Three: Maintaining your Model Playground</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_notebooks.html">Example Notebooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#tabular-classification">Tabular Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#tabular-regression">Tabular Regression:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#text-classification">Text Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#image-classification">Image Classification:</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_notebooks.html#video-classification">Video Classification:</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modelplayground.html">Model Playground Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#activate">activate</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#deploy">deploy</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#create-competition">create_competition</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#create-experiment">create_experiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#quick-submit">quick_submit</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#update-runtime-model">update_runtime_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#update-example-data">update_example_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelplayground.html#delete-deployment">delete_deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="competition.html">Competition Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="competition.html#submit-model">submit_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#instantiate-model">instantiate_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#inspect-model">inspect_model</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#compare-models">compare_models</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#stylize-compare">stylize_compare</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#inspect-y-test">inspect_y_test</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#get-leaderboard">get_leaderboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#stylize-leaderboard">stylize_leaderboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition.html#update-access-list">update_access_list</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Supporting Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="functions.html#configure-credentials">configure_credentials()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#set-credentials">set_credentials()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#download-data">download_data()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#export-eval-metric">export_eval_metric()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#export-reproducibility-env">export_reproducibility_env()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#share-dataset">share_dataset()</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#custom-deployments">Custom Deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-pyspark">Using PySpark</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-custom-web-apps">Connecting Custom Web Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#model-reproducibility">Model Reproducibility</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">The AI Model Share Initiative</a></li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <section id="advanced-features">
<span id="id1"></span><h1>Advanced Features<a class="headerlink" href="#advanced-features" title="Permalink to this heading">¶</a></h1>
<p>The AI Model Share library can help deploy interactive web dashboards for making predictions with your models in minutes.</p>
<p>However, sometimes there is a need for higher levels of customization than the base features include.</p>
<p>This page describes additional pathways to allow for the greatest programming flexibility, while also leveraging the power of the AI Model Share library.</p>
<section id="custom-deployments">
<span id="id2"></span><h2>Custom Deployments<a class="headerlink" href="#custom-deployments" title="Permalink to this heading">¶</a></h2>
<p>The base <code class="docutils literal notranslate"><span class="pre">ModelPlayground.deploy</span></code> method deploys a pre-written lambda handler optimized for efficiency with specific types of prediction domains.</p>
<p>For projects requiring more flexibility in the lambda handler, the AI ModelShare library allows for “Custom Deployments”. Custom Deployments allow users to leverage the AI ModelShare infrastructure through AWS, while also creating opportunities for additional customization.</p>
<p><strong>Tutorial</strong></p>
<p><a class="reference external" href="https://www.modelshare.org/notebooks/notebook:365">Guide to Custom Deployments</a></p>
</section>
<section id="using-pyspark">
<span id="pyspark"></span><h2>Using PySpark<a class="headerlink" href="#using-pyspark" title="Permalink to this heading">¶</a></h2>
<p>AI Model Share supports PySpark. Note that the current prediction API runtime can only accept Pandas Dataframes, which may require additional steps for PySpark preprocessors.</p>
<p><strong>Tutorial</strong></p>
<p><a class="reference external" href="https://www.modelshare.org/notebooks/notebook:366">Quick Start Tutorial with PySpark</a></p>
</section>
<section id="connecting-custom-web-apps">
<span id="webapps"></span><h2>Connecting Custom Web Apps<a class="headerlink" href="#connecting-custom-web-apps" title="Permalink to this heading">¶</a></h2>
<p>AI Model Share allows users to leverage the AI Model Share deployment infrastructure to power their own custom web apps. Web apps can be displayed through the AI Model Share website and be highlighted as part of a developer’s portfolio.</p>
<p><strong>Users can connect their web apps in 3 easy steps:</strong></p>
<ol class="arabic">
<li><p>Deploy a Model Playground (See tutorials <a class="reference internal" href="example_notebooks.html#example-notebooks"><span class="std std-ref">HERE</span></a>).</p></li>
<li><p>In the code for your web app, set the path for your Model Playground’s prediction API (built for you by AI Model Share in the “deploy” step) as the endpoint for the API request.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Owners can find their Model Playground’s API URL on the “Predict” tab of their Model Playground.</p>
<p>AI Model Share API URLs follow this format: <em>“https://example.execute-api.us-east-1.amazonaws.com/prod/m”</em></p>
<img alt="_images/predict_tab.png" src="_images/predict_tab.png" />
</div>
</div></blockquote>
</li>
<li><p>Authorization tokens are generated for users when they log in to the AI Model Share website. Unpack the token parameter within your Streamlit code, then format the headers in your API call to expect a token as a query parameter.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auth_token</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">experimental_get_query_params</span><span class="p">()[</span><span class="s1">&#39;token&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;authorizationToken&quot;</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p><strong>Done!</strong> Design your web-app to customize the AI Model Share infrastructure to your own needs. See examples below:</p>
<p><strong>Examples</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://share.streamlit.io/raudipra/streamlit-text-classification/main">Text Classification: Webapp</a></p></li>
<li><p><a class="reference external" href="https://github.com/raudipra/streamlit-text-classification">Text Classification: Github</a></p></li>
<li><p><a class="reference external" href="https://share.streamlit.io/raudipra/streamlit-tabular-classification/main">Tabular Classification: Webapp</a></p></li>
<li><p><a class="reference external" href="https://github.com/raudipra/streamlit-tabular-classification">Tabular Classification: Github</a></p></li>
<li><p><a class="reference external" href="https://share.streamlit.io/raudipra/streamlit-image-classification/main">Image Classification: Webapp</a></p></li>
<li><p><a class="reference external" href="https://github.com/raudipra/streamlit-image-classification">Image Classification: Github</a></p></li>
</ul>
</section>
<section id="model-reproducibility">
<span id="reproducibility"></span><h2>Model Reproducibility<a class="headerlink" href="#model-reproducibility" title="Permalink to this heading">¶</a></h2>
<p>AI Model Share encourages users to share, replicate, and build on each other’s work by offering full model reproducibility functionality.
Users can leverage Competitions &amp; Experiments as a way to exchange trained &amp; untrained models.</p>
<p>To <strong>share</strong> a reproducible model, take the following steps:</p>
<ol class="arabic">
<li><p>Export the model’s reproducibility environment into a json file with the <code class="docutils literal notranslate"><span class="pre">export_reproducibility_env</span></code> function. This function captures all of the necessary information to exactly reproduce a machine learning model.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aimodelshare</span> <span class="kn">import</span> <span class="n">export_reproducibility_env</span>

<span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;gpu&quot;</span> <span class="c1"># or &quot;cpu&quot;, depending on model type</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">2021</span>

<span class="n">export_reproducibility_env</span><span class="p">(</span>
 <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
  <span class="n">directory</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="c1">#use &quot;&quot; for current directory</span>
  <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The captured reproducibility environment only applies for one training iteration (data prep, preprocessing, fit model, submit model), so it is recommended to only train one model per training iteration.</p>
</div>
<ol class="arabic" start="2">
<li><p>Build your model with your preferred ML library.</p></li>
<li><p>Submit model with the <code class="docutils literal notranslate"><span class="pre">reproducibility_env_filepath</span></code> argument set.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#Submit Reproducible Model:</span>
<span class="n">reproducibility_env_filepath</span><span class="o">=</span><span class="s2">&quot;reproducibility.json&quot;</span>

<span class="c1"># generate predicted y values (for keras models)</span>
<span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">prediction_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">y_test</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y_pred</span><span class="p">]</span>

<span class="c1"># Submit Model to Competition Leaderboard</span>
<span class="n">mycompetition</span><span class="o">.</span><span class="n">submit_model</span><span class="p">(</span><span class="n">model_filepath</span> <span class="o">=</span> <span class="s2">&quot;model.onnx&quot;</span><span class="p">,</span>
           <span class="n">preprocessor_filepath</span><span class="o">=</span><span class="s2">&quot;preprocessor.zip&quot;</span><span class="p">,</span>
           <span class="n">prediction_submission</span><span class="o">=</span><span class="n">prediction_labels</span><span class="p">,</span>
           <span class="n">reproducibility_env_filepath</span><span class="o">=</span><span class="n">reproducibility_env_filepath</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>To <strong>instantiate</strong> a previously submitted reproducible model, use the <code class="docutils literal notranslate"><span class="pre">Competition.instantiate_model</span></code> method.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reproducible_model</span> <span class="o">=</span> <span class="n">mycompetition</span><span class="o">.</span><span class="n">instantiate_model</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">reproduce</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sphinx_highlight.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright 2022, AIModelShare.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.
        </div>
    </div>  

</body>
</html>